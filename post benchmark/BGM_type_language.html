<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BGM Type Language Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .data-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            position: relative;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.5em;
            color: #2c3e50;
            font-weight: 600;
        }

        .download-icon {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .download-icon:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .chart-container {
            width: 100%;
            height: 400px;
            margin-bottom: 20px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .language-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
            color: white;
        }

        .lang-english { background: #3498db; }
        .lang-chinese { background: #e74c3c; }
        .lang-spanish { background: #f39c12; }
        .lang-french { background: #9b59b6; }
        .lang-german { background: #2c3e50; }
        .lang-japanese { background: #e91e63; }
        .lang-korean { background: #00bcd4; }
        .lang-portuguese { background: #4caf50; }

        .language-family {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 0.7em;
            background: #ecf0f1;
            color: #2c3e50;
            margin-left: 5px;
        }

        .usage-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
        }

        .bar-container {
            flex: 1;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Key Metrics -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Language Diversity Metrics</h2>
                <button class="download-icon" onclick="downloadMetrics()">ðŸ“Š Download</button>
            </div>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">15.3K</div>
                    <div class="metric-label">Total Posts</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">4.1M</div>
                    <div class="metric-label">Total Likes</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">980K</div>
                    <div class="metric-label">Total Comments</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">1.8M</div>
                    <div class="metric-label">Total Shares</div>
                </div>
            </div>
        </div>

        <!-- Language Distribution Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Posts by Language</h2>
                <button class="download-icon" onclick="downloadChart('languageDistribution')">ðŸ“Š Download</button>
            </div>
            <div id="languageDistribution" class="chart-container"></div>
        </div>

        <!-- BGM Preferences by Language Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Type Preferences by Language</h2>
                <button class="download-icon" onclick="downloadChart('bgmPreferences')">ðŸ“Š Download</button>
            </div>
            <div id="bgmPreferences" class="chart-container"></div>
        </div>

        <!-- Language Family Analysis Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Trends by Language Family</h2>
                <button class="download-icon" onclick="downloadChart('languageFamily')">ðŸ“Š Download</button>
            </div>
            <div id="languageFamily" class="chart-container"></div>
        </div>

        <!-- Language Analysis Table -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Detailed Language Analysis</h2>
                <button class="download-icon" onclick="downloadTable('languageTable')">ðŸ“Š Download</button>
            </div>
            <table class="data-table" id="languageTable">
                <thead>
                    <tr>
                        <th>Language</th>
                        <th>Family</th>
                        <th>Total Posts</th>
                        <th>Top BGM Type</th>
                        <th>Engagement Rate</th>
                        <th>Growth Rate</th>
                        <th>Market Share</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="language-badge lang-english">English</span><span class="language-family">Germanic</span></td>
                        <td>Indo-European</td>
                        <td>5,240</td>
                        <td>Pop Music</td>
                        <td>14.2%</td>
                        <td>+12.8%</td>
                        <td>32.3%</td>
                    </tr>
                    <tr>
                        <td><span class="language-badge lang-chinese">Chinese</span><span class="language-family">Sino-Tibetan</span></td>
                        <td>Sino-Tibetan</td>
                        <td>3,890</td>
                        <td>Electronic</td>
                        <td>18.7%</td>
                        <td>+22.1%</td>
                        <td>24.0%</td>
                    </tr>
                    <tr>
                        <td><span class="language-badge lang-spanish">Spanish</span><span class="language-family">Romance</span></td>
                        <td>Indo-European</td>
                        <td>2,650</td>
                        <td>Pop Music</td>
                        <td>16.3%</td>
                        <td>+15.4%</td>
                        <td>16.4%</td>
                    </tr>
                    <tr>
                        <td><span class="language-badge lang-french">French</span><span class="language-family">Romance</span></td>
                        <td>Indo-European</td>
                        <td>1,820</td>
                        <td>Jazz</td>
                        <td>12.9%</td>
                        <td>+8.7%</td>
                        <td>11.2%</td>
                    </tr>
                    <tr>
                        <td><span class="language-badge lang-german">German</span><span class="language-family">Germanic</span></td>
                        <td>Indo-European</td>
                        <td>1,590</td>
                        <td>Classical</td>
                        <td>11.4%</td>
                        <td>+6.2%</td>
                        <td>9.8%</td>
                    </tr>
                    <tr>
                        <td><span class="language-badge lang-japanese">Japanese</span><span class="language-family">Japonic</span></td>
                        <td>Japonic</td>
                        <td>1,340</td>
                        <td>Electronic</td>
                        <td>19.2%</td>
                        <td>+18.3%</td>
                        <td>8.3%</td>
                    </tr>
                    <tr>
                        <td><span class="language-badge lang-korean">Korean</span><span class="language-family">Koreanic</span></td>
                        <td>Koreanic</td>
                        <td>980</td>
                        <td>Pop Music</td>
                        <td>21.5%</td>
                        <td>+25.7%</td>
                        <td>6.0%</td>
                    </tr>
                    <tr>
                        <td><span class="language-badge lang-portuguese">Portuguese</span><span class="language-family">Romance</span></td>
                        <td>Indo-European</td>
                        <td>850</td>
                        <td>Rock</td>
                        <td>13.8%</td>
                        <td>+9.1%</td>
                        <td>5.2%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Cross-Cultural Trends Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Cross-Cultural BGM Trends</h2>
                <button class="download-icon" onclick="downloadChart('crossCultural')">ðŸ“Š Download</button>
            </div>
            <div id="crossCultural" class="chart-container"></div>
        </div>
    </div>

    <script>
        // Language Distribution Chart
        const languageDistributionChart = echarts.init(document.getElementById('languageDistribution'));
        const languageDistributionOption = {
                tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['English', 'Chinese', 'Spanish', 'French', 'German', 'Japanese', 'Korean', 'Others']
            },
            series: [
                {
                    name: 'Language',
                    type: 'pie',
                    radius: ['40%', '70%'],
                    avoidLabelOverlap: false,
                    label: {
                        show: true,
                        formatter: '{b}: {d}%'
                    },
                    emphasis: {
                        label: {
                            show: true,
                            fontSize: '18',
                            fontWeight: 'bold'
                        }
                    },
                    data: [
                        { value: 5240, name: 'English', itemStyle: { color: '#3498db' } },
                        { value: 3890, name: 'Chinese', itemStyle: { color: '#e74c3c' } },
                        { value: 2650, name: 'Spanish', itemStyle: { color: '#f39c12' } },
                        { value: 1820, name: 'French', itemStyle: { color: '#9b59b6' } },
                        { value: 1590, name: 'German', itemStyle: { color: '#2c3e50' } },
                        { value: 1340, name: 'Japanese', itemStyle: { color: '#e91e63' } },
                        { value: 980, name: 'Korean', itemStyle: { color: '#00bcd4' } },
                        { value: 1530, name: 'Others', itemStyle: { color: '#95a5a6' } }
                    ]
                }
            ]
        };
        languageDistributionChart.setOption(languageDistributionOption);

        // BGM Preferences by Language Chart
        const bgmPreferencesChart = echarts.init(document.getElementById('bgmPreferences'));
        const bgmPreferencesOption = {
                tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'shadow' }
            },
            legend: {
                data: ['Pop Music', 'Electronic', 'Classical', 'Jazz', 'Rock'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['English', 'Chinese', 'Spanish', 'French', 'German', 'Japanese', 'Korean', 'Portuguese']
            },
            yAxis: {
                type: 'value',
                name: 'Percentage (%)'
            },
            series: [
                {
                    name: 'Pop Music',
                    type: 'bar',
                    stack: 'total',
                    data: [40, 25, 45, 20, 15, 30, 50, 25],
                    itemStyle: { color: '#ff6b6b' }
                },
                {
                    name: 'Electronic',
                    type: 'bar',
                    stack: 'total',
                    data: [25, 45, 20, 15, 20, 40, 25, 20],
                    itemStyle: { color: '#4ecdc4' }
                },
                {
                    name: 'Classical',
                    type: 'bar',
                    stack: 'total',
                    data: [15, 10, 15, 25, 40, 15, 10, 15],
                    itemStyle: { color: '#45b7d1' }
                },
                {
                    name: 'Jazz',
                    type: 'bar',
                    stack: 'total',
                    data: [10, 10, 10, 30, 15, 10, 10, 20],
                    itemStyle: { color: '#f9ca24' }
                },
                {
                    name: 'Rock',
                    type: 'bar',
                    stack: 'total',
                    data: [10, 10, 10, 10, 10, 5, 5, 20],
                    itemStyle: { color: '#6c5ce7' }
                }
            ]
        };
        bgmPreferencesChart.setOption(bgmPreferencesOption);

        // Language Family Analysis Chart
        const languageFamilyChart = echarts.init(document.getElementById('languageFamily'));
        const languageFamilyOption = {
                tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['Indo-European', 'Sino-Tibetan', 'Japonic', 'Koreanic', 'Afro-Asiatic'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['Pop Music', 'Electronic', 'Classical', 'Jazz', 'Rock']
            },
            yAxis: {
                type: 'value',
                name: 'Engagement Rate (%)'
            },
            series: [
                {
                    name: 'Indo-European',
                    type: 'line',
                    data: [18.5, 16.2, 17.8, 19.1, 16.9],
                    itemStyle: { color: '#3498db' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Sino-Tibetan',
                    type: 'line',
                    data: [17.2, 21.1, 15.8, 16.0, 16.2],
                    itemStyle: { color: '#e74c3c' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Japonic',
                    type: 'line',
                    data: [17.8, 20.9, 16.5, 16.8, 15.5],
                    itemStyle: { color: '#e91e63' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Koreanic',
                    type: 'line',
                    data: [22.2, 19.5, 15.2, 15.8, 15.0],
                    itemStyle: { color: '#00bcd4' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Afro-Asiatic',
                    type: 'line',
                    data: [6.8, 6.0, 6.2, 7.2, 7.8],
                    itemStyle: { color: '#f39c12' },
                    lineStyle: { width: 3 }
                }
            ]
        };
        languageFamilyChart.setOption(languageFamilyOption);

        // Cross-Cultural Trends Chart
        const crossCulturalChart = echarts.init(document.getElementById('crossCultural'));
        const crossCulturalOption = {
                tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['Western Pop Influence', 'Asian Electronic Fusion', 'Classical Crossover', 'World Music Blend'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun']
            },
            yAxis: {
                type: 'value',
                name: 'Adoption Rate (%)'
            },
            series: [
                {
                    name: 'Western Pop Influence',
                    type: 'line',
                    data: [65, 68, 71, 74, 76, 78],
                    itemStyle: { color: '#3498db' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'Asian Electronic Fusion',
                    type: 'line',
                    data: [45, 48, 52, 56, 59, 62],
                    itemStyle: { color: '#e74c3c' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'Classical Crossover',
                    type: 'line',
                    data: [35, 37, 39, 41, 43, 45],
                    itemStyle: { color: '#9b59b6' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'World Music Blend',
                    type: 'line',
                    data: [25, 28, 32, 35, 38, 42],
                    itemStyle: { color: '#f39c12' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                }
            ]
        };
        crossCulturalChart.setOption(crossCulturalOption);

        // Resize charts on window resize
        window.addEventListener('resize', function() {
            languageDistributionChart.resize();
            bgmPreferencesChart.resize();
            languageFamilyChart.resize();
            crossCulturalChart.resize();
        });

        // Download functions
        function downloadChart(chartId) {
            let chart;
            switch(chartId) {
                case 'languageDistribution':
                    chart = languageDistributionChart;
                    break;
                case 'bgmPreferences':
                    chart = bgmPreferencesChart;
                    break;
                case 'languageFamily':
                    chart = languageFamilyChart;
                    break;
                case 'crossCultural':
                    chart = crossCulturalChart;
                    break;
            }
            
            if (chart) {
                const url = chart.getDataURL({
                    pixelRatio: 2,
                    backgroundColor: '#fff'
                });
                const link = document.createElement('a');
                link.href = url;
                link.download = `${chartId}_chart.png`;
                link.click();
            }
        }

        function downloadTable(tableId) {
            const table = document.getElementById(tableId);
            let csv = [];
            const rows = table.querySelectorAll('tr');
            
            for (let i = 0; i < rows.length; i++) {
                const row = [], cols = rows[i].querySelectorAll('td, th');
                for (let j = 0; j < cols.length; j++) {
                    let cellText = cols[j].innerText;
                    // Remove badges for CSV
                    if (cols[j].querySelector('.language-badge')) {
                        cellText = cols[j].querySelector('.language-badge').innerText;
                    }
                    row.push('"' + cellText + '"');
                }
                csv.push(row.join(','));
            }
            
            const csvFile = new Blob([csv.join('\n')], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = `${tableId}_data.csv`;
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.click();
        }

        function downloadMetrics() {
            const metrics = [
                ['Metric', 'Value'],
                ['Languages Analyzed', '28'],
                ['Language Families', '6'],
                ['Multilingual Posts', '16.2K'],
                ['Language Coverage', '89.4%']
            ];
            
            const csv = metrics.map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const csvFile = new Blob([csv], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = 'language_metrics.csv';
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.click();
        }
    </script>
</body>
</html>