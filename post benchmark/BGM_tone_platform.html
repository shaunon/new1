<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BGM Tone Platform Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .data-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            position: relative;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.5em;
            color: #2c3e50;
            font-weight: 600;
        }

        .download-icon {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .download-icon:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .chart-container {
            width: 100%;
            height: 400px;
            margin-bottom: 20px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .platform-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
            color: white;
        }

        .platform-tiktok { background: #ff0050; }
        .platform-instagram { background: #e4405f; }
        .platform-youtube { background: #ff0000; }
        .platform-twitter { background: #1da1f2; }
        .platform-facebook { background: #1877f2; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>BGM Tone Platform Analysis</h1>
            <p>Comprehensive analysis of BGM tone preferences across different social media platforms</p>
        </div>

        <!-- Key Metrics -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Platform Performance Metrics</h2>
                <button class="download-icon" onclick="downloadMetrics()">ðŸ“Š Download</button>
            </div>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">14.8K</div>
                    <div class="metric-label">Total Posts</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">3.8M</div>
                    <div class="metric-label">Total Likes</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">1.1M</div>
                    <div class="metric-label">Total Comments</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">1.9M</div>
                    <div class="metric-label">Total Shares</div>
                </div>
            </div>
        </div>

        <!-- Platform Distribution Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Tone Distribution by Platform</h2>
                <button class="download-icon" onclick="downloadChart('platformDistribution')">ðŸ“Š Download</button>
            </div>
            <div id="platformDistribution" class="chart-container"></div>
        </div>

        <!-- Platform Performance Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Platform Engagement Performance</h2>
                <button class="download-icon" onclick="downloadChart('platformPerformance')">ðŸ“Š Download</button>
            </div>
            <div id="platformPerformance" class="chart-container"></div>
        </div>

        <!-- BGM Tone Popularity by Platform -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Tone Popularity Across Platforms</h2>
                <button class="download-icon" onclick="downloadChart('bgmPopularity')">ðŸ“Š Download</button>
            </div>
            <div id="bgmPopularity" class="chart-container"></div>
        </div>

        <!-- Platform Comparison Table -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Platform Comparison Data</h2>
                <button class="download-icon" onclick="downloadTable('platformTable')">ðŸ“Š Download</button>
            </div>
            <table class="data-table" id="platformTable">
                <thead>
                    <tr>
                        <th>Platform</th>
                        <th>Total Posts</th>
                        <th>Top BGM Tone</th>
                        <th>Engagement Rate</th>
                        <th>Growth Rate</th>
                        <th>Market Share</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="platform-badge platform-tiktok">TikTok</span></td>
                        <td>5,120</td>
                        <td>Energetic</td>
                        <td>18.4%</td>
                        <td>+24.7%</td>
                        <td>34.6%</td>
                    </tr>
                    <tr>
                        <td><span class="platform-badge platform-instagram">Instagram</span></td>
                        <td>3,680</td>
                        <td>Uplifting</td>
                        <td>16.2%</td>
                        <td>+19.3%</td>
                        <td>24.9%</td>
                    </tr>
                    <tr>
                        <td><span class="platform-badge platform-youtube">YouTube</span></td>
                        <td>3,240</td>
                        <td>Dramatic</td>
                        <td>22.1%</td>
                        <td>+15.8%</td>
                        <td>21.9%</td>
                    </tr>
                    <tr>
                        <td><span class="platform-badge platform-twitter">Twitter</span></td>
                        <td>1,680</td>
                        <td>Ambient</td>
                        <td>12.7%</td>
                        <td>+8.4%</td>
                        <td>11.4%</td>
                    </tr>
                    <tr>
                        <td><span class="platform-badge platform-facebook">Facebook</span></td>
                        <td>1,080</td>
                        <td>Romantic</td>
                        <td>14.3%</td>
                        <td>+6.2%</td>
                        <td>7.3%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Platform Trends Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Platform Growth Trends</h2>
                <button class="download-icon" onclick="downloadChart('platformTrends')">ðŸ“Š Download</button>
            </div>
            <div id="platformTrends" class="chart-container"></div>
        </div>
    </div>

    <script>
        // Platform Distribution Chart
        const platformDistributionChart = echarts.init(document.getElementById('platformDistribution'));
        const platformDistributionOption = {
            tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'shadow' }
            },
            legend: {
                data: ['Uplifting', 'Energetic', 'Romantic', 'Melancholic', 'Dramatic', 'Ambient'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['TikTok', 'Instagram', 'YouTube', 'Twitter', 'Facebook']
            },
            yAxis: {
                type: 'value',
                name: 'Number of Posts'
            },
            series: [
                {
                    name: 'Uplifting',
                    type: 'bar',
                    stack: 'total',
                    data: [1400, 1200, 800, 400, 300],
                    itemStyle: { color: '#ff6b6b' }
                },
                {
                    name: 'Energetic',
                    type: 'bar',
                    stack: 'total',
                    data: [1600, 900, 600, 300, 200],
                    itemStyle: { color: '#4ecdc4' }
                },
                {
                    name: 'Romantic',
                    type: 'bar',
                    stack: 'total',
                    data: [800, 700, 500, 250, 350],
                    itemStyle: { color: '#45b7d1' }
                },
                {
                    name: 'Melancholic',
                    type: 'bar',
                    stack: 'total',
                    data: [600, 480, 700, 400, 150],
                    itemStyle: { color: '#f9ca24' }
                },
                {
                    name: 'Dramatic',
                    type: 'bar',
                    stack: 'total',
                    data: [520, 280, 800, 230, 80],
                    itemStyle: { color: '#6c5ce7' }
                },
                {
                    name: 'Ambient',
                    type: 'bar',
                    stack: 'total',
                    data: [200, 120, 340, 100, 0],
                    itemStyle: { color: '#a29bfe' }
                }
            ]
        };
        platformDistributionChart.setOption(platformDistributionOption);

        // Platform Performance Chart
        const platformPerformanceChart = echarts.init(document.getElementById('platformPerformance'));
        const platformPerformanceOption = {
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['Average Engagement', 'Post Count'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['TikTok', 'Instagram', 'YouTube', 'Twitter', 'Facebook']
            },
            yAxis: [
                {
                    type: 'value',
                    name: 'Engagement Rate (%)',
                    position: 'left'
                },
                {
                    type: 'value',
                    name: 'Posts',
                    position: 'right'
                }
            ],
            series: [
                {
                    name: 'Average Engagement',
                    type: 'bar',
                    yAxisIndex: 0,
                    data: [18.4, 16.2, 22.1, 12.7, 14.3],
                    itemStyle: { color: '#667eea' }
                },
                {
                    name: 'Post Count',
                    type: 'line',
                    yAxisIndex: 1,
                    data: [5120, 3680, 3240, 1680, 1080],
                    itemStyle: { color: '#764ba2' },
                    lineStyle: { width: 3 }
                }
            ]
        };
        platformPerformanceChart.setOption(platformPerformanceOption);

        // BGM Tone Popularity Chart
        const bgmPopularityChart = echarts.init(document.getElementById('bgmPopularity'));
        const bgmPopularityOption = {
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['Uplifting', 'Energetic', 'Romantic', 'Melancholic', 'Dramatic', 'Ambient']
            },
            series: [
                {
                    name: 'BGM Tone',
                    type: 'pie',
                    radius: ['40%', '70%'],
                    avoidLabelOverlap: false,
                    label: {
                        show: true,
                        formatter: '{b}: {d}%'
                    },
                    emphasis: {
                        label: {
                            show: true,
                            fontSize: '18',
                            fontWeight: 'bold'
                        }
                    },
                    data: [
                        { value: 4100, name: 'Uplifting', itemStyle: { color: '#ff6b6b' } },
                        { value: 3600, name: 'Energetic', itemStyle: { color: '#4ecdc4' } },
                        { value: 2600, name: 'Romantic', itemStyle: { color: '#45b7d1' } },
                        { value: 2330, name: 'Melancholic', itemStyle: { color: '#f9ca24' } },
                        { value: 1910, name: 'Dramatic', itemStyle: { color: '#6c5ce7' } },
                        { value: 760, name: 'Ambient', itemStyle: { color: '#a29bfe' } }
                    ]
                }
            ]
        };
        bgmPopularityChart.setOption(bgmPopularityOption);

        // Platform Trends Chart
        const platformTrendsChart = echarts.init(document.getElementById('platformTrends'));
        const platformTrendsOption = {
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['TikTok', 'Instagram', 'YouTube', 'Twitter', 'Facebook'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun']
            },
            yAxis: {
                type: 'value',
                name: 'Growth Rate (%)'
            },
            series: [
                {
                    name: 'TikTok',
                    type: 'line',
                    data: [18.5, 19.8, 21.2, 22.7, 23.9, 24.7],
                    itemStyle: { color: '#ff0050' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'Instagram',
                    type: 'line',
                    data: [14.2, 15.1, 16.4, 17.8, 18.6, 19.3],
                    itemStyle: { color: '#e4405f' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'YouTube',
                    type: 'line',
                    data: [12.1, 12.9, 13.8, 14.6, 15.2, 15.8],
                    itemStyle: { color: '#ff0000' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'Twitter',
                    type: 'line',
                    data: [6.2, 6.8, 7.3, 7.8, 8.1, 8.4],
                    itemStyle: { color: '#1da1f2' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'Facebook',
                    type: 'line',
                    data: [4.5, 4.9, 5.3, 5.7, 6.0, 6.2],
                    itemStyle: { color: '#1877f2' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                }
            ]
        };
        platformTrendsChart.setOption(platformTrendsOption);

        // Resize charts on window resize
        window.addEventListener('resize', function() {
            platformDistributionChart.resize();
            platformPerformanceChart.resize();
            bgmPopularityChart.resize();
            platformTrendsChart.resize();
        });

        // Download functions
        function downloadChart(chartId) {
            let chart;
            switch(chartId) {
                case 'platformDistribution':
                    chart = platformDistributionChart;
                    break;
                case 'platformPerformance':
                    chart = platformPerformanceChart;
                    break;
                case 'bgmPopularity':
                    chart = bgmPopularityChart;
                    break;
                case 'platformTrends':
                    chart = platformTrendsChart;
                    break;
            }
            
            if (chart) {
                const url = chart.getDataURL({
                    pixelRatio: 2,
                    backgroundColor: '#fff'
                });
                const link = document.createElement('a');
                link.href = url;
                link.download = `${chartId}_chart.png`;
                link.click();
            }
        }

        function downloadTable(tableId) {
            const table = document.getElementById(tableId);
            let csv = [];
            const rows = table.querySelectorAll('tr');
            
            for (let i = 0; i < rows.length; i++) {
                const row = [], cols = rows[i].querySelectorAll('td, th');
                for (let j = 0; j < cols.length; j++) {
                    let cellText = cols[j].innerText;
                    // Remove platform badges for CSV
                    if (cols[j].querySelector('.platform-badge')) {
                        cellText = cols[j].querySelector('.platform-badge').innerText;
                    }
                    row.push('"' + cellText + '"');
                }
                csv.push(row.join(','));
            }
            
            const csvFile = new Blob([csv.join('\n')], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = `${tableId}_data.csv`;
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.click();
        }

        function downloadMetrics() {
            const metrics = [
                ['Metric', 'Value'],
                ['Active Platforms', '5'],
                ['Total Posts', '14.8K'],
                ['Platform Coverage', '89.7%'],
                ['Total Engagement', '3.8M']
            ];
            
            const csv = metrics.map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const csvFile = new Blob([csv], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = 'bgm_tone_platform_metrics.csv';
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.click();
        }
    </script>
</body>
</html>