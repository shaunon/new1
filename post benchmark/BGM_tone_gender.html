<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BGM Tone Gender Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .data-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            position: relative;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.5em;
            color: #2c3e50;
            font-weight: 600;
        }

        .download-icon {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .download-icon:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .chart-container {
            width: 100%;
            height: 400px;
            margin-bottom: 20px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .gender-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
            color: white;
            text-align: center;
            min-width: 60px;
        }

        .gender-male { background: linear-gradient(135deg, #3498db, #2980b9); }
        .gender-female { background: linear-gradient(135deg, #e91e63, #c2185b); }
        .gender-non-binary { background: linear-gradient(135deg, #9c27b0, #7b1fa2); }
        .gender-other { background: linear-gradient(135deg, #ff9800, #f57c00); }

        .preference-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .high-preference { background: #4caf50; }
        .medium-preference { background: #ff9800; }
        .low-preference { background: #f44336; }

        .engagement-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
        }

        .bar-container {
            flex: 1;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .male-bar { background: linear-gradient(90deg, #3498db, #2980b9); }
        .female-bar { background: linear-gradient(90deg, #e91e63, #c2185b); }
        .non-binary-bar { background: linear-gradient(90deg, #9c27b0, #7b1fa2); }

        .demographic-insight {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .insight-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .insight-text {
            color: #5a6c7d;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>BGM Tone Gender Analysis</h1>
            <p>Comprehensive analysis of BGM tone preferences across different gender demographics</p>
        </div>

        <!-- Key Metrics -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Gender Demographics Overview</h2>
                <button class="download-icon" onclick="downloadMetrics()">ðŸ“Š Download</button>
            </div>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">16.8K</div>
                    <div class="metric-label">Total Posts</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">4.2M</div>
                    <div class="metric-label">Total Likes</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">1.1M</div>
                    <div class="metric-label">Total Comments</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">1.9M</div>
                    <div class="metric-label">Total Shares</div>
                </div>
            </div>
        </div>

        <!-- Gender Distribution Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Tone Posts by Gender</h2>
                <button class="download-icon" onclick="downloadChart('genderDistribution')">ðŸ“Š Download</button>
            </div>
            <div id="genderDistribution" class="chart-container"></div>
        </div>

        <!-- BGM Tone Preferences by Gender Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Tone Preferences by Gender</h2>
                <button class="download-icon" onclick="downloadChart('genderPreferences')">ðŸ“Š Download</button>
            </div>
            <div id="genderPreferences" class="chart-container"></div>
        </div>

        <!-- Gender Analysis Table -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Detailed Gender Analysis</h2>
                <button class="download-icon" onclick="downloadTable('genderTable')">ðŸ“Š Download</button>
            </div>
            <table class="data-table" id="genderTable">
                <thead>
                    <tr>
                        <th>Gender</th>
                        <th>Total Posts</th>
                        <th>Top BGM Tone</th>
                        <th>Engagement Rate</th>
                        <th>Avg. Session Time</th>
                        <th>Growth Rate</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="gender-badge gender-female">Female</span></td>
                        <td>9,240</td>
                        <td><span class="preference-indicator high-preference"></span>Uplifting</td>
                        <td>19.3%</td>
                        <td>4m 45s</td>
                        <td>+16.8%</td>
                    </tr>
                    <tr>
                        <td><span class="gender-badge gender-male">Male</span></td>
                        <td>6,890</td>
                        <td><span class="preference-indicator high-preference"></span>Energetic</td>
                        <td>17.1%</td>
                        <td>5m 32s</td>
                        <td>+13.4%</td>
                    </tr>
                    <tr>
                        <td><span class="gender-badge gender-non-binary">Non-Binary</span></td>
                        <td>520</td>
                        <td><span class="preference-indicator medium-preference"></span>Melancholic</td>
                        <td>23.7%</td>
                        <td>6m 18s</td>
                        <td>+31.2%</td>
                    </tr>
                    <tr>
                        <td><span class="gender-badge gender-other">Other</span></td>
                        <td>150</td>
                        <td><span class="preference-indicator medium-preference"></span>Ambient</td>
                        <td>20.4%</td>
                        <td>5m 55s</td>
                        <td>+24.6%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Age-Gender Intersection Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Tone Preferences: Age-Gender Intersection</h2>
                <button class="download-icon" onclick="downloadChart('ageGenderIntersection')">ðŸ“Š Download</button>
            </div>
            <div id="ageGenderIntersection" class="chart-container"></div>
        </div>

        <!-- Gender Engagement Trends Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Gender Engagement Trends Over Time</h2>
                <button class="download-icon" onclick="downloadChart('genderTrends')">ðŸ“Š Download</button>
            </div>
            <div id="genderTrends" class="chart-container"></div>
        </div>

        <!-- Gender Insights -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Key Gender Insights</h2>
                <button class="download-icon" onclick="downloadInsights()">ðŸ“Š Download</button>
            </div>
            
            <div class="demographic-insight">
                <div class="insight-title">Female User Preferences</div>
                <div class="insight-text">
                    Female users show a strong preference for Uplifting (38%) and Romantic (31%) tones, with higher engagement rates during evening hours. 
                    They are 2.8x more likely to share emotionally resonant BGM content and prefer warm, positive musical atmospheres.
                </div>
            </div>

            <div class="demographic-insight">
                <div class="insight-title">Male User Preferences</div>
                <div class="insight-text">
                    Male users gravitate towards Energetic (42%) and Dramatic (27%) tones, with peak activity during late-night sessions. 
                    They spend 22% more time customizing BGM intensity settings and prefer high-impact, dynamic musical experiences.
                </div>
            </div>

            <div class="demographic-insight">
                <div class="insight-title">Non-Binary User Trends</div>
                <div class="insight-text">
                    Non-binary users demonstrate the highest engagement rates (23.7%) and show preference for Melancholic (32%) and Ambient (29%) tones. 
                    This demographic is driving innovation in emotional BGM customization features and atmospheric sound design.
                </div>
            </div>

            <div class="demographic-insight">
                <div class="insight-title">Cross-Gender Trends</div>
                <div class="insight-text">
                    Emerging cross-gender BGM tone trends show increasing convergence in Uplifting and Energetic preferences, 
                    with a 18% increase in tone-crossing behavior across all demographics in the past quarter.
                </div>
            </div>
        </div>
    </div>

    <script>
        // Gender Distribution Chart
        const genderDistributionChart = echarts.init(document.getElementById('genderDistribution'));
        const genderDistributionOption = {
                tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['Female', 'Male', 'Non-Binary', 'Other/Undisclosed']
            },
            series: [
                {
                    name: 'Gender',
                    type: 'pie',
                    radius: ['40%', '70%'],
                    avoidLabelOverlap: false,
                    label: {
                        show: true,
                        formatter: '{b}: {d}%'
                    },
                    emphasis: {
                        label: {
                            show: true,
                            fontSize: '18',
                            fontWeight: 'bold'
                        }
                    },
                    data: [
                        { value: 9240, name: 'Female', itemStyle: { color: '#e91e63' } },
                        { value: 6890, name: 'Male', itemStyle: { color: '#3498db' } },
                        { value: 520, name: 'Non-Binary', itemStyle: { color: '#9c27b0' } },
                        { value: 150, name: 'Other/Undisclosed', itemStyle: { color: '#ff9800' } }
                    ]
                }
            ]
        };
        genderDistributionChart.setOption(genderDistributionOption);

        // BGM Tone Preferences by Gender Chart
        const genderPreferencesChart = echarts.init(document.getElementById('genderPreferences'));
        const genderPreferencesOption = {
                tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'shadow' }
            },
            legend: {
                data: ['Female', 'Male', 'Non-Binary', 'Other'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['Uplifting', 'Energetic', 'Romantic', 'Dramatic', 'Melancholic', 'Ambient', 'Mysterious']
            },
            yAxis: {
                type: 'value',
                name: 'Engagement Rate (%)'
            },
            series: [
                {
                    name: 'Female',
                    type: 'bar',
                    data: [19.3, 15.8, 18.2, 14.6, 16.1, 13.9, 12.7],
                    itemStyle: { color: '#e91e63' }
                },
                {
                    name: 'Male',
                    type: 'bar',
                    data: [17.1, 21.4, 13.5, 19.8, 14.2, 15.6, 16.9],
                    itemStyle: { color: '#3498db' }
                },
                {
                    name: 'Non-Binary',
                    type: 'bar',
                    data: [23.7, 20.8, 21.4, 22.1, 25.3, 24.6, 23.9],
                    itemStyle: { color: '#9c27b0' }
                },
                {
                    name: 'Other',
                    type: 'bar',
                    data: [20.4, 18.7, 19.2, 17.8, 21.1, 22.3, 20.9],
                    itemStyle: { color: '#ff9800' }
                }
            ]
        };
        genderPreferencesChart.setOption(genderPreferencesOption);

        // Age-Gender Intersection Chart
        const ageGenderChart = echarts.init(document.getElementById('ageGenderIntersection'));
        const ageGenderOption = {
                tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['Female 18-25', 'Female 26-35', 'Male 18-25', 'Male 26-35', 'Non-Binary 18-35'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['Uplifting', 'Energetic', 'Romantic', 'Dramatic', 'Melancholic', 'Ambient']
            },
            yAxis: {
                type: 'value',
                name: 'Preference Index'
            },
            series: [
                {
                    name: 'Female 18-25',
                    type: 'line',
                    data: [92, 68, 88, 52, 61, 58],
                    itemStyle: { color: '#e91e63' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Female 26-35',
                    type: 'line',
                    data: [87, 72, 91, 58, 73, 68],
                    itemStyle: { color: '#c2185b' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Male 18-25',
                    type: 'line',
                    data: [64, 89, 48, 87, 58, 62],
                    itemStyle: { color: '#3498db' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Male 26-35',
                    type: 'line',
                    data: [68, 84, 52, 82, 64, 67],
                    itemStyle: { color: '#2980b9' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Non-Binary 18-35',
                    type: 'line',
                    data: [74, 78, 72, 75, 89, 86],
                    itemStyle: { color: '#9c27b0' },
                    lineStyle: { width: 3 }
                }
            ]
        };
        ageGenderChart.setOption(ageGenderOption);

        // Gender Engagement Trends Chart
        const genderTrendsChart = echarts.init(document.getElementById('genderTrends'));
        const genderTrendsOption = {
                tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['Female Engagement', 'Male Engagement', 'Non-Binary Engagement'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun']
            },
            yAxis: {
                type: 'value',
                name: 'Engagement Rate (%)'
            },
            series: [
                {
                    name: 'Female Engagement',
                    type: 'line',
                    data: [17.2, 17.9, 18.4, 18.8, 19.1, 19.3],
                    itemStyle: { color: '#e91e63' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'Male Engagement',
                    type: 'line',
                    data: [15.8, 16.1, 16.5, 16.7, 16.9, 17.1],
                    itemStyle: { color: '#3498db' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'Non-Binary Engagement',
                    type: 'line',
                    data: [20.5, 21.2, 21.9, 22.6, 23.1, 23.7],
                    itemStyle: { color: '#9c27b0' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                }
            ]
        };
        genderTrendsChart.setOption(genderTrendsOption);

        // Resize charts on window resize
        window.addEventListener('resize', function() {
            genderDistributionChart.resize();
            genderPreferencesChart.resize();
            ageGenderChart.resize();
            genderTrendsChart.resize();
        });

        // Download functions
        function downloadChart(chartId) {
            let chart;
            switch(chartId) {
                case 'genderDistribution':
                    chart = genderDistributionChart;
                    break;
                case 'genderPreferences':
                    chart = genderPreferencesChart;
                    break;
                case 'ageGenderIntersection':
                    chart = ageGenderChart;
                    break;
                case 'genderTrends':
                    chart = genderTrendsChart;
                    break;
            }
            
            if (chart) {
                const url = chart.getDataURL({
                    pixelRatio: 2,
                    backgroundColor: '#fff'
                });
                const link = document.createElement('a');
                link.href = url;
                link.download = `${chartId}_chart.png`;
                link.click();
            }
        }

        function downloadTable(tableId) {
            const table = document.getElementById(tableId);
            let csv = [];
            const rows = table.querySelectorAll('tr');
            
            for (let i = 0; i < rows.length; i++) {
                const row = [], cols = rows[i].querySelectorAll('td, th');
                for (let j = 0; j < cols.length; j++) {
                    let cellText = cols[j].innerText;
                    // Remove badges and indicators for CSV
                    if (cols[j].querySelector('.gender-badge')) {
                        cellText = cols[j].querySelector('.gender-badge').innerText;
                    }
                    row.push('"' + cellText + '"');
                }
                csv.push(row.join(','));
            }
            
            const csvFile = new Blob([csv.join('\n')], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = `${tableId}_data.csv`;
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.click();
        }

        function downloadMetrics() {
            const metrics = [
                ['Metric', 'Value'],
                ['Female Users', '55.0%'],
                ['Male Users', '41.0%'],
                ['Non-Binary Users', '3.1%'],
                ['Other/Undisclosed', '0.9%']
            ];
            
            const csv = metrics.map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const csvFile = new Blob([csv], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = 'bgm_tone_gender_metrics.csv';
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.click();
        }

        function downloadInsights() {
            const insights = [
                ['Gender Group', 'Key Insight'],
                ['Female Users', 'Strong preference for Uplifting (38%) and Romantic (31%) tones, higher evening engagement, 2.8x more likely to share emotional BGM content'],
                ['Male Users', 'Prefer Energetic (42%) and Dramatic (27%) tones, peak late-night activity, 22% more time on BGM intensity customization'],
                ['Non-Binary Users', 'Highest engagement rates (23.7%), prefer Melancholic (32%) and Ambient (29%) tones, drive emotional BGM innovation'],
                ['Cross-Gender Trends', '18% increase in tone-crossing behavior, convergence in Uplifting and Energetic preferences']
            ];
            
            const csv = insights.map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const csvFile = new Blob([csv], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = 'bgm_tone_gender_insights.csv';
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.click();
        }
    </script>
</body>
</html>