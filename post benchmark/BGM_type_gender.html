<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BGM Type Gender Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .data-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            position: relative;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.5em;
            color: #2c3e50;
            font-weight: 600;
        }

        .download-icon {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .download-icon:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .chart-container {
            width: 100%;
            height: 400px;
            margin-bottom: 20px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .gender-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
            color: white;
            text-align: center;
            min-width: 60px;
        }

        .gender-male { background: linear-gradient(135deg, #3498db, #2980b9); }
        .gender-female { background: linear-gradient(135deg, #e91e63, #c2185b); }
        .gender-non-binary { background: linear-gradient(135deg, #9c27b0, #7b1fa2); }
        .gender-other { background: linear-gradient(135deg, #ff9800, #f57c00); }

        .preference-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .high-preference { background: #4caf50; }
        .medium-preference { background: #ff9800; }
        .low-preference { background: #f44336; }

        .engagement-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
        }

        .bar-container {
            flex: 1;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .male-bar { background: linear-gradient(90deg, #3498db, #2980b9); }
        .female-bar { background: linear-gradient(90deg, #e91e63, #c2185b); }
        .non-binary-bar { background: linear-gradient(90deg, #9c27b0, #7b1fa2); }

        .demographic-insight {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .insight-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .insight-text {
            color: #5a6c7d;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Key Metrics -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Gender Demographics Overview</h2>
                <button class="download-icon" onclick="downloadMetrics()">ðŸ“Š Download</button>
            </div>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">14.2K</div>
                    <div class="metric-label">Total Posts</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">3.8M</div>
                    <div class="metric-label">Total Likes</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">920K</div>
                    <div class="metric-label">Total Comments</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">1.6M</div>
                    <div class="metric-label">Total Shares</div>
                </div>
            </div>
        </div>

        <!-- Gender Distribution Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Posts by Gender</h2>
                <button class="download-icon" onclick="downloadChart('genderDistribution')">ðŸ“Š Download</button>
            </div>
            <div id="genderDistribution" class="chart-container"></div>
        </div>

        <!-- BGM Preferences by Gender Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Type Preferences by Gender</h2>
                <button class="download-icon" onclick="downloadChart('genderPreferences')">ðŸ“Š Download</button>
            </div>
            <div id="genderPreferences" class="chart-container"></div>
        </div>

        <!-- Gender Analysis Table -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Detailed Gender Analysis</h2>
                <button class="download-icon" onclick="downloadTable('genderTable')">ðŸ“Š Download</button>
            </div>
            <table class="data-table" id="genderTable">
                <thead>
                    <tr>
                        <th>Gender</th>
                        <th>Total Posts</th>
                        <th>Top BGM Type</th>
                        <th>Engagement Rate</th>
                        <th>Avg. Session Time</th>
                        <th>Growth Rate</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="gender-badge gender-female">Female</span></td>
                        <td>8,470</td>
                        <td><span class="preference-indicator high-preference"></span>Pop Music</td>
                        <td>18.7%</td>
                        <td>4m 32s</td>
                        <td>+15.3%</td>
                    </tr>
                    <tr>
                        <td><span class="gender-badge gender-male">Male</span></td>
                        <td>7,140</td>
                        <td><span class="preference-indicator high-preference"></span>Electronic</td>
                        <td>16.2%</td>
                        <td>5m 18s</td>
                        <td>+12.7%</td>
                    </tr>
                    <tr>
                        <td><span class="gender-badge gender-non-binary">Non-Binary</span></td>
                        <td>450</td>
                        <td><span class="preference-indicator medium-preference"></span>Alternative</td>
                        <td>22.4%</td>
                        <td>6m 05s</td>
                        <td>+28.9%</td>
                    </tr>
                    <tr>
                        <td><span class="gender-badge gender-other">Other</span></td>
                        <td>130</td>
                        <td><span class="preference-indicator medium-preference"></span>Experimental</td>
                        <td>7.6/10</td>
                        <td>19.8%</td>
                        <td>5m 42s</td>
                        <td>+22.1%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Age-Gender Intersection Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">BGM Preferences: Age-Gender Intersection</h2>
                <button class="download-icon" onclick="downloadChart('ageGenderIntersection')">ðŸ“Š Download</button>
            </div>
            <div id="ageGenderIntersection" class="chart-container"></div>
        </div>

        <!-- Gender Engagement Trends Chart -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Gender Engagement Trends Over Time</h2>
                <button class="download-icon" onclick="downloadChart('genderTrends')">ðŸ“Š Download</button>
            </div>
            <div id="genderTrends" class="chart-container"></div>
        </div>

        <!-- Gender Insights -->
        <div class="data-card">
            <div class="card-header">
                <h2 class="card-title">Key Gender Insights</h2>
                <button class="download-icon" onclick="downloadInsights()">ðŸ“Š Download</button>
            </div>
            
            <div class="demographic-insight">
                <div class="insight-title">Female User Preferences</div>
                <div class="insight-text">
                    Female users show a strong preference for Pop Music (42%) and R&B (28%), with higher engagement rates during evening hours. 
                    They are 2.3x more likely to share BGM-enhanced content and prefer emotionally resonant music choices.
                </div>
            </div>

            <div class="demographic-insight">
                <div class="insight-title">Male User Preferences</div>
                <div class="insight-text">
                    Male users gravitate towards Electronic (38%) and Rock (25%) genres, with peak activity during late-night sessions. 
                    They spend 18% more time customizing BGM settings and prefer high-energy, rhythm-focused tracks.
                </div>
            </div>

            <div class="demographic-insight">
                <div class="insight-title">Non-Binary User Trends</div>
                <div class="insight-text">
                    Non-binary users demonstrate the highest engagement rates (22.4%) and show preference for Alternative (35%) and Indie (28%) genres. 
                    This demographic is driving innovation in BGM customization features.
                </div>
            </div>

            <div class="demographic-insight">
                <div class="insight-title">Cross-Gender Trends</div>
                <div class="insight-text">
                    Emerging cross-gender BGM trends show increasing convergence in Electronic and Pop preferences, 
                    with a 15% increase in genre-crossing behavior across all demographics in the past quarter.
                </div>
            </div>
        </div>
    </div>

    <script>
        // Gender Distribution Chart
        const genderDistributionChart = echarts.init(document.getElementById('genderDistribution'));
        const genderDistributionOption = {
                tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['Female', 'Male', 'Non-Binary', 'Other/Undisclosed']
            },
            series: [
                {
                    name: 'Gender',
                    type: 'pie',
                    radius: ['40%', '70%'],
                    avoidLabelOverlap: false,
                    label: {
                        show: true,
                        formatter: '{b}: {d}%'
                    },
                    emphasis: {
                        label: {
                            show: true,
                            fontSize: '18',
                            fontWeight: 'bold'
                        }
                    },
                    data: [
                        { value: 8470, name: 'Female', itemStyle: { color: '#e91e63' } },
                        { value: 7140, name: 'Male', itemStyle: { color: '#3498db' } },
                        { value: 450, name: 'Non-Binary', itemStyle: { color: '#9c27b0' } },
                        { value: 130, name: 'Other/Undisclosed', itemStyle: { color: '#ff9800' } }
                    ]
                }
            ]
        };
        genderDistributionChart.setOption(genderDistributionOption);

        // BGM Preferences by Gender Chart
        const genderPreferencesChart = echarts.init(document.getElementById('genderPreferences'));
        const genderPreferencesOption = {
                tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'shadow' }
            },
            legend: {
                data: ['Female', 'Male', 'Non-Binary', 'Other'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['Pop Music', 'Electronic', 'Rock', 'R&B', 'Classical', 'Alternative', 'Jazz']
            },
            yAxis: {
                type: 'value',
                name: 'Engagement Rate (%)'
            },
            series: [
                {
                    name: 'Female',
                    type: 'bar',
                    data: [18.7, 14.2, 12.8, 16.5, 13.9, 12.1, 15.3],
                    itemStyle: { color: '#e91e63' }
                },
                {
                    name: 'Male',
                    type: 'bar',
                    data: [16.2, 19.4, 17.8, 14.5, 15.7, 13.9, 16.8],
                    itemStyle: { color: '#3498db' }
                },
                {
                    name: 'Non-Binary',
                    type: 'bar',
                    data: [22.4, 20.1, 18.6, 21.3, 19.8, 24.2, 23.1],
                    itemStyle: { color: '#9c27b0' }
                },
                {
                    name: 'Other',
                    type: 'bar',
                    data: [6.8, 7.2, 6.5, 6.9, 7.5, 7.6, 8.1],
                    itemStyle: { color: '#ff9800' }
                }
            ]
        };
        genderPreferencesChart.setOption(genderPreferencesOption);

        // Age-Gender Intersection Chart
        const ageGenderChart = echarts.init(document.getElementById('ageGenderIntersection'));
        const ageGenderOption = {
                tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['Female 18-25', 'Female 26-35', 'Male 18-25', 'Male 26-35', 'Non-Binary 18-35'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['Pop', 'Electronic', 'Rock', 'R&B', 'Classical', 'Alternative']
            },
            yAxis: {
                type: 'value',
                name: 'Preference Index'
            },
            series: [
                {
                    name: 'Female 18-25',
                    type: 'line',
                    data: [95, 65, 45, 85, 55, 60],
                    itemStyle: { color: '#e91e63' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Female 26-35',
                    type: 'line',
                    data: [85, 70, 55, 90, 75, 65],
                    itemStyle: { color: '#c2185b' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Male 18-25',
                    type: 'line',
                    data: [60, 90, 85, 55, 60, 65],
                    itemStyle: { color: '#3498db' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Male 26-35',
                    type: 'line',
                    data: [65, 85, 80, 60, 70, 60],
                    itemStyle: { color: '#2980b9' },
                    lineStyle: { width: 3 }
                },
                {
                    name: 'Non-Binary 18-35',
                    type: 'line',
                    data: [70, 75, 70, 70, 70, 85],
                    itemStyle: { color: '#9c27b0' },
                    lineStyle: { width: 3 }
                }
            ]
        };
        ageGenderChart.setOption(ageGenderOption);

        // Gender Engagement Trends Chart
        const genderTrendsChart = echarts.init(document.getElementById('genderTrends'));
        const genderTrendsOption = {
                tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['Female Engagement', 'Male Engagement', 'Non-Binary Engagement'],
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun']
            },
            yAxis: {
                type: 'value',
                name: 'Engagement Rate (%)'
            },
            series: [
                {
                    name: 'Female Engagement',
                    type: 'line',
                    data: [16.2, 17.1, 17.8, 18.2, 18.5, 18.7],
                    itemStyle: { color: '#e91e63' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'Male Engagement',
                    type: 'line',
                    data: [14.8, 15.2, 15.6, 15.9, 16.0, 16.2],
                    itemStyle: { color: '#3498db' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                },
                {
                    name: 'Non-Binary Engagement',
                    type: 'line',
                    data: [19.5, 20.1, 20.8, 21.5, 21.9, 22.4],
                    itemStyle: { color: '#9c27b0' },
                    lineStyle: { width: 3 },
                    areaStyle: { opacity: 0.3 }
                }
            ]
        };
        genderTrendsChart.setOption(genderTrendsOption);

        // Resize charts on window resize
        window.addEventListener('resize', function() {
            genderDistributionChart.resize();
            genderPreferencesChart.resize();
            ageGenderChart.resize();
            genderTrendsChart.resize();
        });

        // Download functions
        function downloadChart(chartId) {
            let chart;
            switch(chartId) {
                case 'genderDistribution':
                    chart = genderDistributionChart;
                    break;
                case 'genderPreferences':
                    chart = genderPreferencesChart;
                    break;
                case 'ageGenderIntersection':
                    chart = ageGenderChart;
                    break;
                case 'genderTrends':
                    chart = genderTrendsChart;
                    break;
            }
            
            if (chart) {
                const url = chart.getDataURL({
                    pixelRatio: 2,
                    backgroundColor: '#fff'
                });
                const link = document.createElement('a');
                link.href = url;
                link.download = `${chartId}_chart.png`;
                link.click();
            }
        }

        function downloadTable(tableId) {
            const table = document.getElementById(tableId);
            let csv = [];
            const rows = table.querySelectorAll('tr');
            
            for (let i = 0; i < rows.length; i++) {
                const row = [], cols = rows[i].querySelectorAll('td, th');
                for (let j = 0; j < cols.length; j++) {
                    let cellText = cols[j].innerText;
                    // Remove badges and indicators for CSV
                    if (cols[j].querySelector('.gender-badge')) {
                        cellText = cols[j].querySelector('.gender-badge').innerText;
                    }
                    row.push('"' + cellText + '"');
                }
                csv.push(row.join(','));
            }
            
            const csvFile = new Blob([csv.join('\n')], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = `${tableId}_data.csv`;
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.click();
        }

        function downloadMetrics() {
            const metrics = [
                ['Metric', 'Value'],
                ['Female Users', '52.3%'],
                ['Male Users', '44.1%'],
                ['Non-Binary Users', '2.8%'],
                ['Other/Undisclosed', '0.8%']
            ];
            
            const csv = metrics.map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const csvFile = new Blob([csv], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = 'gender_metrics.csv';
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.click();
        }

        function downloadInsights() {
            const insights = [
                ['Gender Group', 'Key Insight'],
                ['Female Users', 'Strong preference for Pop Music (42%) and R&B (28%), higher evening engagement, 2.3x more likely to share BGM content'],
                ['Male Users', 'Prefer Electronic (38%) and Rock (25%), peak late-night activity, 18% more time on BGM customization'],
                ['Non-Binary Users', 'Highest engagement rates (22.4%), prefer Alternative (35%) and Indie (28%), drive BGM innovation'],
                ['Cross-Gender Trends', '15% increase in genre-crossing behavior, convergence in Electronic and Pop preferences']
            ];
            
            const csv = insights.map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const csvFile = new Blob([csv], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = 'gender_insights.csv';
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.click();
        }
    </script>
</body>
</html>