<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
            width: 1900px;
        }
        .main-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        .chart-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        .full-width {
            grid-column: 1 / -1;
        }
        .chart-title {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3rem;
            color: #333;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        .chart-container {
            height: 500px;
        }
        .table-section {
            grid-column: 1 / -1;
            background-color: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            text-align: left;
        }
        th, td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
            font-size: 0.9rem;
        }
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #555;
            position: sticky;
            top: 0;
            white-space: nowrap;
        }
        tr:hover {
            background-color: #f1f1f1;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="chart-section full-width">
            <h3 class="chart-title">Brand Share of Voice Over Time (Monthly)</h3>
            <div class="chart-container">
                <canvas id="stackedBarChart"></canvas>
            </div>
        </div>

        <div class="chart-section">
            <h3 class="chart-title">Brand Mentions Trend</h3>
            <div class="chart-container">
                <canvas id="lineChart"></canvas>
            </div>
        </div>

        <div class="chart-section">
            <h3 class="chart-title">Brand Sentiment Analysis</h3>
            <div class="chart-container">
                <canvas id="donutChart"></canvas>
            </div>
        </div>

        <div class="chart-section full-width">
            <h3 class="chart-title">Brand Performance: Mentions vs. Engagement</h3>
            <div class="chart-container">
                <canvas id="scatterPlot"></canvas>
            </div>
        </div>

        <div class="table-section">
            <h3 class="chart-title">Brand Analysis Data</h3>
            <table>
                <thead>
                    <tr>
                        <th>Brand Name</th>
                        <th>Mentions</th>
                        <th>Share of Voice (%)</th>
                        <th>Related Videos</th>
                        <th>Total Views</th>
                        <th>Total Engagement</th>
                        <th>Avg. Engagement Rate</th>
                        <th>Positive Mentions (%)</th>
                        <th>Neutral Mentions (%)</th>
                        <th>Negative Mentions (%)</th>
                        <th>Unique Creators</th>
                        <th>Top Mentioning Creator</th>
                        <th>KOL vs UGC Ratio</th>
                        <th>Main Associated Topics/Tags</th>
                    </tr>
                </thead>
                <tbody id="brand-data-body">
                    <!-- Data will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Sample data for brand analysis
        const brandData = [
            {
                brandName: "Nike", 
                mentions: 12500, 
                shareOfVoice: 28.4, 
                relatedVideos: 3200, 
                totalViews: 45000000, 
                totalEngagement: 3800000, 
                avgEngagementRate: 0.084, 
                positiveMentions: 72, 
                neutralMentions: 21, 
                negativeMentions: 7, 
                uniqueCreators: 1850, 
                topCreator: "SportsFanatic", 
                kolUgcRatio: "65:35", 
                mainTopics: "Running, Basketball, Athleisure"
            },
            {
                brandName: "Adidas", 
                mentions: 9800, 
                shareOfVoice: 22.3, 
                relatedVideos: 2700, 
                totalViews: 38000000, 
                totalEngagement: 2900000, 
                avgEngagementRate: 0.076, 
                positiveMentions: 68, 
                neutralMentions: 24, 
                negativeMentions: 8, 
                uniqueCreators: 1520, 
                topCreator: "UrbanStyler", 
                kolUgcRatio: "60:40", 
                mainTopics: "Football, Streetwear, Originals"
            },
            {
                brandName: "Puma", 
                mentions: 5200, 
                shareOfVoice: 11.8, 
                relatedVideos: 1400, 
                totalViews: 22000000, 
                totalEngagement: 1800000, 
                avgEngagementRate: 0.082, 
                positiveMentions: 65, 
                neutralMentions: 27, 
                negativeMentions: 8, 
                uniqueCreators: 980, 
                topCreator: "TrackStar", 
                kolUgcRatio: "55:45", 
                mainTopics: "Athletics, Motorsport, Lifestyle"
            },
            {
                brandName: "Under Armour", 
                mentions: 4100, 
                shareOfVoice: 9.3, 
                relatedVideos: 1100, 
                totalViews: 18500000, 
                totalEngagement: 1250000, 
                avgEngagementRate: 0.068, 
                positiveMentions: 62, 
                neutralMentions: 28, 
                negativeMentions: 10, 
                uniqueCreators: 720, 
                topCreator: "FitnessGuru", 
                kolUgcRatio: "70:30", 
                mainTopics: "Training, Performance, Basketball"
            },
            {
                brandName: "New Balance", 
                mentions: 3800, 
                shareOfVoice: 8.6, 
                relatedVideos: 950, 
                totalViews: 15000000, 
                totalEngagement: 1350000, 
                avgEngagementRate: 0.090, 
                positiveMentions: 75, 
                neutralMentions: 20, 
                negativeMentions: 5, 
                uniqueCreators: 680, 
                topCreator: "RunningAddict", 
                kolUgcRatio: "50:50", 
                mainTopics: "Running, Lifestyle, Made in USA"
            },
            {
                brandName: "Reebok", 
                mentions: 2900, 
                shareOfVoice: 6.6, 
                relatedVideos: 780, 
                totalViews: 12000000, 
                totalEngagement: 980000, 
                avgEngagementRate: 0.082, 
                positiveMentions: 64, 
                neutralMentions: 26, 
                negativeMentions: 10, 
                uniqueCreators: 520, 
                topCreator: "CrossFitChamp", 
                kolUgcRatio: "60:40", 
                mainTopics: "CrossFit, Classic, Fitness"
            },
            {
                brandName: "Asics", 
                mentions: 2200, 
                shareOfVoice: 5.0, 
                relatedVideos: 580, 
                totalViews: 8500000, 
                totalEngagement: 720000, 
                avgEngagementRate: 0.085, 
                positiveMentions: 78, 
                neutralMentions: 18, 
                negativeMentions: 4, 
                uniqueCreators: 390, 
                topCreator: "MarathonRunner", 
                kolUgcRatio: "45:55", 
                mainTopics: "Running, Performance, Gel Technology"
            },
            {
                brandName: "Converse", 
                mentions: 1900, 
                shareOfVoice: 4.3, 
                relatedVideos: 520, 
                totalViews: 9800000, 
                totalEngagement: 850000, 
                avgEngagementRate: 0.087, 
                positiveMentions: 70, 
                neutralMentions: 22, 
                negativeMentions: 8, 
                uniqueCreators: 420, 
                topCreator: "SkateboardPro", 
                kolUgcRatio: "40:60", 
                mainTopics: "Skateboarding, Lifestyle, Chuck Taylor"
            },
            {
                brandName: "Vans", 
                mentions: 1600, 
                shareOfVoice: 3.6, 
                relatedVideos: 450, 
                totalViews: 7500000, 
                totalEngagement: 680000, 
                avgEngagementRate: 0.091, 
                positiveMentions: 72, 
                neutralMentions: 21, 
                negativeMentions: 7, 
                uniqueCreators: 350, 
                topCreator: "SkateLife", 
                kolUgcRatio: "35:65", 
                mainTopics: "Skateboarding, Streetwear, Off The Wall"
            },
            {
                brandName: "Fila", 
                mentions: 1200, 
                shareOfVoice: 2.7, 
                relatedVideos: 320, 
                totalViews: 5200000, 
                totalEngagement: 420000, 
                avgEngagementRate: 0.081, 
                positiveMentions: 60, 
                neutralMentions: 30, 
                negativeMentions: 10, 
                uniqueCreators: 280, 
                topCreator: "RetroFashion", 
                kolUgcRatio: "55:45", 
                mainTopics: "Tennis, Retro, Heritage"
            }
        ];

        // Monthly data for stacked bar chart and line chart
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
        const monthlyData = {
            Nike: [2000, 2200, 2100, 2300, 1900, 2000],
            Adidas: [1600, 1700, 1650, 1550, 1700, 1600],
            Puma: [850, 900, 850, 800, 900, 900],
            'Under Armour': [700, 650, 700, 750, 650, 650],
            'New Balance': [600, 650, 600, 650, 650, 650],
            Reebok: [500, 450, 500, 500, 450, 500],
            Asics: [350, 400, 350, 350, 400, 350],
            Converse: [300, 350, 300, 350, 300, 300],
            Vans: [250, 300, 250, 250, 300, 250],
            Fila: [200, 200, 200, 200, 200, 200]
        };

        // Populate Table
        const tableBody = document.getElementById('brand-data-body');
        brandData.forEach(b => {
            const row = `<tr>
                <td>${b.brandName}</td>
                <td>${b.mentions.toLocaleString()}</td>
                <td>${b.shareOfVoice.toFixed(1)}%</td>
                <td>${b.relatedVideos.toLocaleString()}</td>
                <td>${b.totalViews.toLocaleString()}</td>
                <td>${b.totalEngagement.toLocaleString()}</td>
                <td>${(b.avgEngagementRate * 100).toFixed(1)}%</td>
                <td>${b.positiveMentions}%</td>
                <td>${b.neutralMentions}%</td>
                <td>${b.negativeMentions}%</td>
                <td>${b.uniqueCreators.toLocaleString()}</td>
                <td>${b.topCreator}</td>
                <td>${b.kolUgcRatio}</td>
                <td>${b.mainTopics}</td>
            </tr>`;
            tableBody.innerHTML += row;
        });

        // Stacked Bar Chart
        const stackedBarCtx = document.getElementById('stackedBarChart').getContext('2d');
        const brandNames = brandData.map(b => b.brandName);
        const brandColors = [
            'rgba(255, 99, 132, 0.7)',
            'rgba(54, 162, 235, 0.7)',
            'rgba(255, 206, 86, 0.7)',
            'rgba(75, 192, 192, 0.7)',
            'rgba(153, 102, 255, 0.7)',
            'rgba(255, 159, 64, 0.7)',
            'rgba(199, 199, 199, 0.7)',
            'rgba(83, 102, 255, 0.7)',
            'rgba(40, 159, 64, 0.7)',
            'rgba(210, 105, 30, 0.7)'
        ];

        const stackedBarDatasets = brandNames.map((brand, index) => {
            return {
                label: brand,
                data: monthlyData[brand],
                backgroundColor: brandColors[index],
                borderColor: brandColors[index].replace('0.7', '1'),
                borderWidth: 1
            };
        });

        new Chart(stackedBarCtx, {
            type: 'bar',
            data: {
                labels: months,
                datasets: stackedBarDatasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        stacked: true,
                        title: {
                            display: true,
                            text: 'Month'
                        }
                    },
                    y: {
                        stacked: true,
                        title: {
                            display: true,
                            text: 'Number of Mentions'
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        mode: 'index',
                        intersect: false
                    },
                    legend: {
                        position: 'right'
                    }
                }
            }
        });

        // Line Chart
        const lineCtx = document.getElementById('lineChart').getContext('2d');
        const lineDatasets = brandNames.slice(0, 5).map((brand, index) => {
            return {
                label: brand,
                data: monthlyData[brand],
                borderColor: brandColors[index].replace('0.7', '1'),
                backgroundColor: 'transparent',
                borderWidth: 2,
                pointRadius: 3,
                tension: 0.1
            };
        });

        new Chart(lineCtx, {
            type: 'line',
            data: {
                labels: months,
                datasets: lineDatasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Number of Mentions'
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        mode: 'index',
                        intersect: false
                    }
                }
            }
        });

        // Donut Chart (Sentiment Analysis)
        const donutCtx = document.getElementById('donutChart').getContext('2d');
        
        // Create a dropdown for brand selection
        const donutChartSection = document.querySelector('.chart-section:nth-child(3)');
        const brandSelectorContainer = document.createElement('div');
        brandSelectorContainer.style.marginBottom = '15px';
        brandSelectorContainer.style.display = 'flex';
        brandSelectorContainer.style.alignItems = 'center';
        brandSelectorContainer.style.justifyContent = 'flex-end';
        
        const brandSelectorLabel = document.createElement('label');
        brandSelectorLabel.textContent = 'Select Brand: ';
        brandSelectorLabel.style.marginRight = '10px';
        brandSelectorLabel.style.fontWeight = '500';
        
        const brandSelector = document.createElement('select');
        brandSelector.id = 'brand-sentiment-selector';
        brandSelector.style.padding = '5px 10px';
        brandSelector.style.borderRadius = '4px';
        brandSelector.style.border = '1px solid #ddd';
        
        // Add "All Brands" option
        const allBrandsOption = document.createElement('option');
        allBrandsOption.value = 'all';
        allBrandsOption.textContent = 'All Brands (Average)';
        brandSelector.appendChild(allBrandsOption);
        
        // Add individual brand options
        brandData.forEach(brand => {
            const option = document.createElement('option');
            option.value = brand.brandName;
            option.textContent = brand.brandName;
            brandSelector.appendChild(option);
        });
        
        brandSelectorContainer.appendChild(brandSelectorLabel);
        brandSelectorContainer.appendChild(brandSelector);
        
        // Insert the selector before the chart container
        const chartContainer = donutChartSection.querySelector('.chart-container');
        donutChartSection.insertBefore(brandSelectorContainer, chartContainer);
        
        // Initialize sentiment chart
        let sentimentChart;
        
        function updateSentimentChart(selectedBrand) {
            const sentimentData = {
                labels: ['Positive', 'Neutral', 'Negative'],
                datasets: []
            };
            
            const sentimentColors = {
                backgroundColor: [
                    'rgba(75, 192, 192, 0.7)',  // Positive - Green
                    'rgba(201, 203, 207, 0.7)', // Neutral - Gray
                    'rgba(255, 99, 132, 0.7)'   // Negative - Red
                ],
                borderColor: [
                    'rgba(75, 192, 192, 1)',
                    'rgba(201, 203, 207, 1)',
                    'rgba(255, 99, 132, 1)'
                ]
            };
            
            if (selectedBrand === 'all') {
                // Calculate average sentiment across all brands
                const avgSentiment = {
                    positive: brandData.reduce((sum, b) => sum + b.positiveMentions, 0) / brandData.length,
                    neutral: brandData.reduce((sum, b) => sum + b.neutralMentions, 0) / brandData.length,
                    negative: brandData.reduce((sum, b) => sum + b.negativeMentions, 0) / brandData.length
                };
                
                sentimentData.datasets.push({
                    label: 'All Brands (Average)',
                    data: [avgSentiment.positive, avgSentiment.neutral, avgSentiment.negative],
                    backgroundColor: sentimentColors.backgroundColor,
                    borderColor: sentimentColors.borderColor,
                    borderWidth: 1
                });
            } else {
                // Get sentiment data for the selected brand
                const brand = brandData.find(b => b.brandName === selectedBrand);
                
                sentimentData.datasets.push({
                    label: brand.brandName,
                    data: [brand.positiveMentions, brand.neutralMentions, brand.negativeMentions],
                    backgroundColor: sentimentColors.backgroundColor,
                    borderColor: sentimentColors.borderColor,
                    borderWidth: 1
                });
            }
            
            // Destroy previous chart if it exists
            if (sentimentChart) {
                sentimentChart.destroy();
            }
            
            // Create new chart
            sentimentChart = new Chart(donutCtx, {
                type: 'doughnut',
                data: sentimentData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label || '';
                                    const value = context.raw.toFixed(1);
                                    return `${context.label}: ${value}%`;
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: selectedBrand === 'all' ? 'Average Sentiment Across All Brands' : `Sentiment Analysis for ${selectedBrand}`,
                            font: {
                                size: 14
                            }
                        }
                    }
                }
            });
        }
        
        // Initialize with all brands
        updateSentimentChart('all');
        
        // Add event listener for brand selection change
        brandSelector.addEventListener('change', function() {
            updateSentimentChart(this.value);
        });

        // Scatter Plot
        const scatterCtx = document.getElementById('scatterPlot').getContext('2d');
        new Chart(scatterCtx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Brands',
                    data: brandData.map(b => ({
                        x: b.mentions,
                        y: b.avgEngagementRate,
                        brandName: b.brandName
                    })),
                    backgroundColor: brandData.map((_, i) => brandColors[i]),
                    pointRadius: 8,
                    pointHoverRadius: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const brandName = context.raw.brandName;
                                const mentions = context.parsed.x.toLocaleString();
                                const engagementRate = (context.parsed.y * 100).toFixed(1) + '%';
                                return `${brandName}: (Mentions: ${mentions}, Engagement Rate: ${engagementRate})`;
                            }
                        }
                    },
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Number of Mentions'
                        },
                        beginAtZero: true
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Average Engagement Rate'
                        },
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>
</html>
