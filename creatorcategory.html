<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
            color: #333;
            max-width: 1900px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card-header {
            background-color: #f1f5f9;
            border-bottom: none;
            font-weight: bold;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f1f5f9;
            font-weight: bold;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row mt-4">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">Creator Category Analysis - Combo Chart</div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="comboChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">Creator Category Analysis - Bubble Chart</div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="bubbleChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">Creator Category Data Table</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Creator Category</th>
                                        <th>Number of Creators</th>
                                        <th>Percentage</th>
                                        <th>Avg. Followers</th>
                                        <th>Avg. Engagement Rate</th>
                                    </tr>
                                </thead>
                                <tbody id="categoryTableBody">
                                    <!-- Table data will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data for creator categories
        const categoryData = [
            { 
                category: "Beauty & Fashion", 
                creators: 12500, 
                percentage: 18.5, 
                avgFollowers: 850000, 
                engagementRate: 3.2 
            },
            { 
                category: "Entertainment", 
                creators: 10800, 
                percentage: 16.0, 
                avgFollowers: 1250000, 
                engagementRate: 2.8 
            },
            { 
                category: "Lifestyle", 
                creators: 9200, 
                percentage: 13.6, 
                avgFollowers: 720000, 
                engagementRate: 3.5 
            },
            { 
                category: "Food & Cooking", 
                creators: 7500, 
                percentage: 11.1, 
                avgFollowers: 650000, 
                engagementRate: 4.2 
            },
            { 
                category: "Fitness & Health", 
                creators: 6800, 
                percentage: 10.1, 
                avgFollowers: 580000, 
                engagementRate: 3.8 
            },
            { 
                category: "Travel", 
                creators: 5400, 
                percentage: 8.0, 
                avgFollowers: 920000, 
                engagementRate: 2.9 
            },
            { 
                category: "Gaming", 
                creators: 4900, 
                percentage: 7.3, 
                avgFollowers: 1100000, 
                engagementRate: 4.5 
            },
            { 
                category: "Education", 
                creators: 3800, 
                percentage: 5.6, 
                avgFollowers: 480000, 
                engagementRate: 2.4 
            },
            { 
                category: "Technology", 
                creators: 3500, 
                percentage: 5.2, 
                avgFollowers: 520000, 
                engagementRate: 1.9 
            },
            { 
                category: "Business & Finance", 
                creators: 2100, 
                percentage: 3.1, 
                avgFollowers: 390000, 
                engagementRate: 1.7 
            },
            { 
                category: "Arts & Crafts", 
                creators: 1800, 
                percentage: 2.7, 
                avgFollowers: 310000, 
                engagementRate: 5.1 
            }
        ];

        // Populate the table
        function populateTable() {
            const tableBody = document.getElementById('categoryTableBody');
            categoryData.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.category}</td>
                    <td>${item.creators.toLocaleString()}</td>
                    <td>${item.percentage.toFixed(1)}%</td>
                    <td>${item.avgFollowers.toLocaleString()}</td>
                    <td>${item.engagementRate.toFixed(1)}%</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Create Combo Chart (Bar + Line)
        function createComboChart() {
            const ctx = document.getElementById('comboChart').getContext('2d');
            
            // Sort data by number of creators (descending)
            const sortedData = [...categoryData].sort((a, b) => b.creators - a.creators);
            
            const labels = sortedData.map(item => item.category);
            const creatorCounts = sortedData.map(item => item.creators);
            const engagementRates = sortedData.map(item => item.engagementRate);

            const comboChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Number of Creators',
                            data: creatorCounts,
                            backgroundColor: 'rgba(54, 162, 235, 0.7)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1,
                            order: 2,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Avg. Engagement Rate (%)',
                            data: engagementRates,
                            type: 'line',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(255, 99, 132, 1)',
                            pointRadius: 4,
                            fill: false,
                            tension: 0.4,
                            order: 1,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Creator Count vs. Engagement Rate by Category',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                autoSkip: false,
                                maxRotation: 45,
                                minRotation: 45
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Number of Creators'
                            },
                            beginAtZero: true
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Engagement Rate (%)'
                            },
                            beginAtZero: true,
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
        }

        // Create Bubble Chart
        function createBubbleChart() {
            const ctx = document.getElementById('bubbleChart').getContext('2d');
            
            // Prepare data for bubble chart
            const bubbleData = categoryData.map(item => {
                return {
                    x: item.creators,
                    y: item.engagementRate,
                    r: Math.sqrt(item.avgFollowers) / 100, // Scale bubble size for better visualization
                    label: item.category
                };
            });

            const bubbleChart = new Chart(ctx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: 'Creator Categories',
                        data: bubbleData,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)',
                            'rgba(199, 199, 199, 0.7)',
                            'rgba(83, 102, 255, 0.7)',
                            'rgba(40, 159, 64, 0.7)',
                            'rgba(210, 99, 132, 0.7)',
                            'rgba(100, 162, 235, 0.7)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Creator Ecosystem by Category (Bubble Size = Avg. Followers)',
                            font: {
                                size: 16
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const data = context.raw;
                                    return [
                                        `Category: ${data.label}`,
                                        `Creators: ${data.x.toLocaleString()}`,
                                        `Engagement Rate: ${data.y.toFixed(1)}%`,
                                        `Avg. Followers: ${(Math.pow(data.r * 100, 2)).toLocaleString()}`
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Number of Creators'
                            },
                            beginAtZero: true
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Avg. Engagement Rate (%)'
                            },
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Initialize all visualizations
        window.onload = function() {
            populateTable();
            createComboChart();
            createBubbleChart();
        };
    </script>
</body>
</html>
